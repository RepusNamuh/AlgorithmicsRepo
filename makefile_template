# Define directories
BUILD_DIR := build

# Compiler and flags (adjust as needed)
CC := gcc
CFLAGS := -Wall -Wextra -Werror -Wno-newline-eof -Wno-unused-parameter -pedantic -std=c2x
MAKEFLAGS := --no-print-directory
.PHONY: all clean run

# The default target

$(BUILD_DIR):
	@mkdir -p $(BUILD_DIR)

# Rule to compile a single program into the build directory
$(BUILD_DIR)/%: %.c | $(BUILD_DIR)
	@$(CC) $(CFLAGS)  $< -o $@

# Make <program> will be compile and placed in the "build" directory
# The code below turn terminal command "make <program>" into "make build/<program>"
%:
	@$(MAKE) $(MAKEFLAGS) $(BUILD_DIR)/$@

# Rule to clean up the build directory
clean:
	@find $(BUILD_DIR) -type f -exec rm -f {} +
